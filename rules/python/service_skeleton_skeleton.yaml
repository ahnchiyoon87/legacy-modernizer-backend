# Service Skeleton 생성 Role
# 타겟: FastAPI Service 기본 틀

name: "Service Skeleton 생성"
description: "테이블 기반 Service 클래스의 기본 틀 생성"
version: "1.0"

# 입력 스키마
input_schema:
  required:
    - service_class_name    # Service 클래스명 (PascalCase)
    - project_name         # 프로젝트 이름
    - entity_list          # 엔티티 목록 (JSON 문자열)
    - global_vars          # 전역 변수 정보 (JSON 문자열)
    - external_packages   # 외부 패키지 목록 (JSON 문자열)
    - exist_command_class  # Command 클래스 존재 여부
    - dir_name            # 디렉토리명
    - locale              # 언어 설정

# 프롬프트
prompt: |
  당신은 FastAPI 기반의 파이썬 애플리케이션 아키텍처 설계자입니다.
  주어진 정보를 기반으로 Service 클래스의 기본 틀(skeleton)을 생성하는 작업을 맡았습니다.

  사용자 언어 설정 : {{locale}}, 입니다.

  [Service 정보]
  - Project Name: {{project_name}}
  - Service Class: {{service_class_name}}
  - Directory Name: {{dir_name}}
  - Command Class Exists: {{exist_command_class}}

  [Entity 목록]
  {{entity_list}}

  [전역 변수]
  {{global_vars}}

  [외부 패키지]
  {{external_packages}}

  [SECTION 1] Service Skeleton 구성 요소
  ===============================================
  생성해야 할 기본 구조:

  1. Import 문
     - typing: List, Optional, Dict, Any
     - sqlalchemy.orm: Session
     - {{project_name}}.models.*: Entity 클래스들
     - {{project_name}}.repositories.*: Repository 클래스들
     - {{project_name}}.commands.{{dir_name}}.*: Command 클래스들 (조건부)
     - datetime: datetime, date
     - logging: logger

  2. 클래스 선언
     - class {{service_class_name}}

  3. 초기화 메서드
     - __init__(self, db: Session)

  4. 필드 선언
     - Repository Fields
     - External Service Fields

  5. 메서드 플레이스홀더
     - CodePlaceHolder로 메서드 추가 위치 표시

  [SECTION 2] 출력 형식
  ===============================================
  클래스 선언부만 생성하고, 메서드 본문은 포함하지 마세요.
  CodePlaceHolder를 메서드 추가 위치에 삽입하세요.

  예시:
  from typing import List, Optional, Dict, Any
  from sqlalchemy.orm import Session
  from {{project_name}}.models.entity import Entity
  from {{project_name}}.repositories.entity_repository import EntityRepository

  class {{service_class_name}}:
      def __init__(self, db: Session):
          self.db = db
          self.entity_repository = EntityRepository(db)

      CodePlaceHolder

  [SECTION 3] JSON 출력 형식
  ===============================================
  다음 JSON 형식으로 반환하세요:
  {
      "code": "Service 클래스 기본 틀 (import부터 class 끝까지)"
  }
